<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Product Catalog - E-Commerce Store</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
	<link rel="stylesheet" th:href="@{/css/style.css}">
</head>

<body>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-light bg-white sticky-top shadow-sm">
    <div class="container">
        <a class="navbar-brand fw-bold" href="/catalog">
            <i class="bi bi-shop"></i> E-Commerce Store
        </a>
    </div>
</nav>

<!-- HERO -->
<div class="hero-banner text-center">
    <div class="container">
        <h1><i class="bi bi-box-seam"></i> Product Catalog</h1>
        <p>Discover our amazing collection of products</p>
    </div>
</div>

<!-- CATALOG -->
<div class="catalog-container">
    <div class="container">

        <!-- HEADER -->
        <div class="d-flex justify-content-between align-items-center mb-4">
            <div>
                <h2>All Products</h2>
                <small class="text-muted">
                    <span th:text="${#lists.size(products)}">0</span> products available
                </small>
            </div>

            <!-- VIEW SWITCH -->
            <div class="btn-group">
                <button id="btnGrid" class="btn btn-outline-secondary active">
                    <i class="bi bi-grid-3x3-gap"></i>
                </button>
                <button id="btnList" class="btn btn-outline-secondary">
                    <i class="bi bi-list"></i>
                </button>
            </div>
        </div>

        <!-- FILTER BAR -->
        <div class="filter-bar">
            <input class="form-control" placeholder="Search products...">
        </div>

        <!-- ================= GRID VIEW ================= -->
        <div id="gridView" th:if="${!#lists.isEmpty(products)}">
            <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4">
                <div class="col" th:each="product : ${products}">
                    <div class="card product-card">
                        <div class="product-image">
                            <span th:text="${product.name.substring(0,1)}">P</span>
                            <span class="product-badge" th:text="${product.sku}">SKU</span>
                        </div>

                        <div class="card-body">
                            <h5 th:text="${product.name}">Product</h5>
                            <p class="text-muted small"
                               th:text="${product.description}"></p>

                            <div class="product-price mb-3">
                                $<span th:text="${#numbers.formatDecimal(product.price,1,2)}">0.00</span>
                            </div>

                            <a th:href="@{/catalog/{id}(id=${product.id})}"
                               class="btn btn-view-detail w-100">
                                <i class="bi bi-eye"></i> View details
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ================= LIST VIEW ================= -->
        <div id="listView" class="d-none" th:if="${!#lists.isEmpty(products)}">
            <div class="list-group">
                <div class="list-group-item mb-3"
                     th:each="product : ${products}">
                    <div class="row align-items-center">
                        <div class="col-md-1 text-center fw-bold fs-3 text-primary"
                             th:text="${product.name.substring(0,1)}">P</div>

                        <div class="col-md-5">
                            <h5 th:text="${product.name}"></h5>
                            <p class="text-muted mb-1"
                               th:text="${product.description}"></p>
                            <span class="badge bg-light text-dark"
                                  th:text="${product.sku}">SKU</span>
                        </div>

                        <div class="col-md-3 text-center fs-4 fw-bold text-primary">
                            $<span th:text="${#numbers.formatDecimal(product.price,1,2)}">0.00</span>
                        </div>

                        <div class="col-md-3 text-end">
                            <a th:href="@{/catalog/{id}(id=${product.id})}"
                               class="btn btn-primary">
                                <i class="bi bi-eye"></i> View
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- EMPTY -->
        <div th:if="${#lists.isEmpty(products)}"
             class="text-center bg-white p-5 rounded">
            <i class="bi bi-inbox fs-1 text-muted"></i>
            <h3>No products available</h3>
        </div>

    </div>
</div>

<!-- FOOTER -->
<footer class="bg-dark text-white text-center py-4">
    Â© 2026 E-Commerce Store
</footer>

<!-- JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
    const btnGrid = document.getElementById("btnGrid");
    const btnList = document.getElementById("btnList");
    const gridView = document.getElementById("gridView");
    const listView = document.getElementById("listView");

    btnGrid.onclick = () => {
        gridView.classList.remove("d-none");
        listView.classList.add("d-none");
        btnGrid.classList.add("active");
        btnList.classList.remove("active");
    };

    btnList.onclick = () => {
        gridView.classList.add("d-none");
        listView.classList.remove("d-none");
        btnList.classList.add("active");
        btnGrid.classList.remove("active");
    };
</script>

</body>
</html>
